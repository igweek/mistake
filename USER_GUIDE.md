# 使用指南 - AI错题本应用

## 新增功能使用说明

### 功能1️⃣：移动端快速科目和标签选择

#### 什么改变了？
- **之前**：需要点击下拉按钮→选择科目和标签（操作繁琐）
- **现在**：打开拍摄界面后，所有科目和标签都在按钮上方直接显示（一目了然）

#### 如何操作？

**步骤1**：打开应用，点击"录入错题"
- 进入拍摄界面

**步骤2**：在拍摄按钮上方选择科目
```
┌──────────────────────────────┐
│    对应科目                    │
│  [数学] [英语] [语文] [物理]   │
│  [化学] [其他]                │
└──────────────────────────────┘
```
- 点击所需科目即可选中（选中会变蓝）
- 默认选中：数学

**步骤3**：选择或创建标签
```
┌──────────────────────────────┐
│    已有标签                    │
│  [方程组] [函数] [几何] [导数] │
│                              │
│    新建标签                    │
│  [输入框] [+ 添加]             │
│                              │
│    已选标签                    │
│  [方程组 ✕] [函数 ✕]          │
└──────────────────────────────┘
```
- **快速选择**：点击"已有标签"中的标签直接添加
- **新建标签**：
  1. 在输入框输入新标签
  2. 点击"+"按钮或按Enter键
  3. 新标签出现在"已选标签"区域
- **删除标签**：点击标签右侧的✕即可删除

**步骤4**：拍照或上传图片
```
┌──────────────────────────────┐
│                              │
│    [📷 点击拍照或上传]        │
│                              │
│  Automatic WebP Compression  │
└──────────────────────────────┘
```
- 点击按钮拍照或选择本地图片

**步骤5**：保存
- 可选：去除手写痕迹（见功能2）
- 点击右上角✓保存错题

---

### 功能2️⃣：AI智能去除手写痕迹

#### 什么是手写痕迹去除？
在扫描试卷或笔记时，经常会有：
- ✏️ 笔迹标记（如圈出、下划线、批注）
- 📝 手写答案或解题过程
- ✍️ 其他手写内容

这个功能可以智能识别并淡化这些手写痕迹，使打印的题目内容更清晰。

#### 工作原理
```
原始图片（包含手写痕迹）
         ↓
    AI分析识别
         ↓
   对比度增强
（打印文字更黑，手写痕迹更淡）
         ↓
    清晰化后的图片
         ↓
   点击保存
```

#### 如何使用？

**移动端使用**：
1. 拍照/上传图片后，在预览界面下方出现按钮：
   ```
   [🎯 去除手写痕迹]
   ```
2. 点击按钮
3. 等待处理（显示"处理中..."）
4. 自动返回清晰化后的图片
5. 点击保存

**桌面端使用**：
1. 拍照/上传图片后，在底部操作栏看到：
   ```
   [裁剪] [✨ AI清除] [保存] [重选]
   ```
2. 点击"AI清除"按钮（紫色）
3. 等待处理完成
4. 点击"保存"提交

#### 效果预期

| 操作前 | 操作后 |
|-------|-------|
| ❌ 试卷上有圆圈、划线、批注 | ✅ 手写痕迹淡化，题目清晰 |
| ❌ 手写答案和打印题目混在一起 | ✅ 打印题目更突出 |
| ❌ 图片对比度不足 | ✅ 黑色文字更清晰 |

#### 💡 使用建议
- **什么时候用**：
  - 拍摄包含手写笔迹的试卷
  - 图片对比度不够好
  - 想要更清晰的题目内容

- **什么时候不用**：
  - 图片已经很清晰
  - 手写内容是题目的一部分（如需要保留）

#### ⚠️ 注意事项
1. **需要API密钥**
   - 首先在"设置"中配置 Gemini API Key
   - [获取API密钥](https://ai.google.dev)

2. **需要网络连接**
   - AI处理需要上传图片到Google服务器
   - 确保网络正常连接

3. **处理时间**
   - 首次处理：1-3秒
   - 后续处理可能更快（取决于服务器）

4. **图片隐私**
   - 只在可信的网络环境中使用
   - 不上传包含隐私信息的图片

---

## 快速开始

### 场景1：快速拍摄数学题

1. 点击"录入错题"
2. 界面自动显示：[数学]已选，无标签
3. 拍照
4. 如果有手写痕迹，点击"去除手写痕迹"
5. 点击保存 ✓

### 场景2：拍摄并标记知识点

1. 点击"录入错题"
2. 选择科目（如物理）
3. 在已有标签中点击选择（如"静力学"）
4. 若无合适标签，在输入框输入新标签，点击"+"
5. 拍照
6. 点击保存 ✓

### 场景3：清理手写笔迹

1. 拍摄包含批注的试卷
2. 点击"去除手写痕迹"
3. 等待AI处理（显示加载动画）
4. 预览清晰化后的图片
5. 确认无误，点击保存 ✓

---

## 常见问题

**Q1：为什么看不到"去除手写痕迹"按钮？**
- A：确认已在设置中配置Gemini API Key。若未配置，按钮将隐藏。

**Q2：去除手写痕迹需要花多长时间？**
- A：通常1-3秒，取决于图片大小和网络速度。

**Q3：可以多次使用去除手写痕迹功能吗？**
- A：可以。选择"重选"后重新拍照，可再次使用此功能。

**Q4：手写痕迹没有完全去除怎么办？**
- A：这是正常的。AI会尽力淡化，但无法完全消除。如果效果不满意，可以：
  - 重新拍照，确保光线充足
  - 尝试调整拍摄角度

**Q5：标签添加后在哪里可以看到？**
- A：添加的标签会出现在"已选标签"区域，保存后会在错题详情中显示。

**Q6：如何删除已经添加的标签？**
- A：在"已选标签"区域，点击标签右侧的✕即可删除。

---

## 设置API密钥

### 获取Gemini API密钥

1. 访问 [Google AI Studio](https://ai.google.dev/aistudio)
2. 点击"Get API Key"
3. 按照提示创建或选择项目
4. 复制API密钥

### 在应用中配置

1. 打开应用，进入"设置"页面
2. 找到"Gemini API Key"输入框
3. 粘贴刚才复制的密钥
4. 点击"保存设置"
5. 返回拍摄界面，功能即可使用

---

## 技术规格

- **支持的图片格式**：JPG, PNG, WebP
- **最大图片大小**：自动压缩至1280px宽度
- **AI模型**：Google Gemini 2.0 Flash
- **处理方式**：云端处理（需网络连接）

---

## 反馈和建议

如有任何问题或建议，欢迎通过以下方式反馈：
- 📧 邮件反馈
- 💬 应用内反馈
- 📱 社交媒体

感谢您的使用！

---

**版本**：2.0（AI功能更新版）  
**更新日期**：2026年1月23日
